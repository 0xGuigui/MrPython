\documentclass[a4paper]{article}

\usepackage{geometry}
\usepackage{fancyhdr}

\usepackage{amsmath}
\usepackage{amssymb}

\renewcommand{\headrulewidth}{0.4pt}
\lhead{Sorbonne Universit\' e -- Informatique}
\pagestyle{fancy}
\rhead{\thepage}
\fancyfoot{}

\usepackage{proof}
\usepackage{colonequals}

\newenvironment{program}{
\begin{sffamily}
\begin{scriptsize}
\begin{tabbing}}
{\end{tabbing}
\end{scriptsize}
\end{sffamily}}

\newcommand{\kw}[1]{\textsf{\textbf{#1}}}
\newcommand{\cmt}[1]{\textsf{\textit{#1}}}
\newcommand{\code}[1]{\begin{sffamily}#1\end{sffamily}}
\newcommand{\pindent}{\hspace{2em}\=}

\newcommand{\defs}{\stackrel{{\scriptscriptstyle \mathsf{def}}}{=}}
\newcommand{\defmin}{\stackrel{{\scriptscriptstyle \mathsf{min}}}{=}}
\newcommand{\colcol}{\coloncolon}

\newcommand{\yield}{\Rrightarrow}

\begin{document}

\setlength{\parskip}{1ex}
\setlength{\parindent}{0mm}


\title{Python101 language specification}

\author{Alexandre Doussot, Christopher Trublereau, Fr\' ed\' eric Peschanski\\
Sorbonne Universit\' e}

\date{\today}

\maketitle
\begin{abstract}
TODO
\end{abstract}

\thispagestyle{fancy}

\section{Introduction}

TODO

\section{Syntax}

TODO

\subsection{Programs}

TODO

\begin{program}
\cmt{\# imports ...}\\
$\cdots$\\
\kw{def} function$_1$(arg$_{1_1}$, \ldots, arg$_{1_m}$):\\
\pindent \cmt{\# function$_1$ body}\\
\\
$\cdots$ \\
\\
\kw{def} function$_n$(arg$_{n_1}$, \ldots, arg$_{n_m}$):\\
\> \cmt{\# function$_n$ body}\\
\\
$\cdots$\\
\cmt{\# tests ...} \\
\end{program}

\subsection{Functions}

TODO

\subsection{Instructions}

TODO

\subsection{Expressions}

TODO

\section{Type system}

\vspace{1\baselineskip}

$\infer[\text{(true)}]%
{\Delta;\Gamma \vdash \kw{True} \yield \kw{bool}}%
{}$

\vspace{3\baselineskip}

$\infer[\text{(false)}]%
{\Delta;\Gamma \vdash \kw{False} \yield \kw{bool}}%
{}$

\vspace{3\baselineskip}


$\infer[\text{(var)}]%
{\Delta;\Gamma, \kw{x:t}~ \vdash x \yield \kw{t}}%
{}$

\vspace{3\baselineskip}

$\infer[\text{(not)}]%
{\Delta;\Gamma \vdash \kw{not}~e \yield \kw{bool}}%
{\Delta;\Gamma \vdash e \colcol \kw{bool} & \kw{not}:\kw{bool}\rightarrow\kw{bool}\in \Delta}$

\vspace{3\baselineskip}

$\infer[\text{(and)}]%
{\Delta;\Gamma \vdash \kw{and}~\textrm{e}_\textrm{1},~\textrm{e}_\textrm{2} \yield \kw{bool}}%
{\Delta;\Gamma \vdash \textrm{e}_\textrm{1} \colcol \kw{bool}~~ \Delta;\Gamma \vdash\textrm{e}_\textrm{2} \colcol \kw{bool} & \kw{and}:\kw{bool}\times\kw{bool}\rightarrow\kw{bool}\in \Delta}$

\vspace{3\baselineskip}

$\infer[\text{(app)}]%
{\Delta;\Gamma \vdash f(\textrm{e}_\textrm{1},...,\textrm{e}_\textrm{n}) \yield \kw{t}}%
{\Delta;\Gamma \vdash \textrm{e}_\textrm{1} \colcol \kw{t}_\kw{1}~...~ \Delta;\Gamma \vdash \textrm{e}_\textrm{n} \colcol \kw{t}_\kw{n} & f:\kw{t}_\kw{1}\times ... \times\kw{t}_\kw{n}\rightarrow\kw{t}\in \Delta}$

\vspace{3\baselineskip}

$\infer[\text{(max)}]%
{\Delta;\Gamma \vdash \kw{def}~\kw{max}(\textrm{x},\textrm{y}) \colcol \{(mx = x);(if~y>=x); (return~mx)\} ~ \kw{Number/int}\times\kw{Number/int}\rightarrow\kw{Number/int}}%
{\Delta;\Gamma \vdash \textrm{x} \colcol \textrm{Number/int}~~ \Delta;\Gamma \vdash\textrm{y} \colcol \textrm{Number/int}&&
\Delta;\Gamma \vdash\textrm{mx} \colcol \textrm{Number/int}}$

\vspace{3\baselineskip}

\subsection{Rules for max}

\vspace{2\baselineskip}

$\infer[\text{(var x)}]%
{\Delta;\Gamma~ \kw{x}:\kw{Number/int}~ \vdash \kw{x} \yield \kw{Number/int} \vdash\Delta}%
{}$

\vspace{2\baselineskip}

$\infer[\text{(var y)}]%
{\Delta;\Gamma~ \kw{y}:\kw{Number/int}~ \vdash \kw{y} \yield \kw{Number/int} \vdash\Delta}%
{}$

\vspace{2\baselineskip}

$\infer[\text{(var mx)}]%
{\Delta;\Gamma~ \kw{mx}:\kw{Number/int}~ \vdash \kw{mx} \yield \kw{Number/int} \vdash\Delta}%
{}$

\vspace{2\baselineskip}

$\infer[\text{(mx = x)}]%
{\Delta;\Gamma~\vdash \kw{mx} : \kw{T} = \kw{x} \yield \kw{Number/int}~ \vdash~\Delta,\kw{mx}:\kw{T} }%
{\Delta; \Gamma~\vdash \kw{x}\colcol\kw{T}}$

\vspace{2\baselineskip}

$\infer[\text{(if x \textgreater= y)}]%
{\Delta;\Gamma~\vdash \kw{if} \text{(x \textgreater= y)} \{(mx = y)\} \yield \kw{Number/int}~ \vdash\Delta_\textrm{1}}%
{\Delta; \Gamma~\vdash \text{(x \textgreater= y)} \yield \kw{T}~\vdash\Delta ~~~~ \Delta; \Gamma~\vdash~\text{(mx = y)}\yield \kw{Number/int}~\vdash\Delta_\textrm{1}}$

\vspace{2\baselineskip}

$\infer[\text{(mx = y)}]%
{\Delta;\Gamma~\vdash \kw{mx} : \kw{T} = \kw{y} \yield \kw{Number/int}~ \vdash~\Delta,\kw{mx}:\kw{T} }%
{\Delta; \Gamma~\vdash \kw{y}\colcol\kw{T}}$

\vspace{2\baselineskip}

$\infer[\text{(return mx)}]%
{\Delta;\Gamma, ~\text{return}:\kw{T}~\vdash\text{return}~\kw{mx}~\vdash \kw{Number/int}~ \vdash \Delta}%
{\Delta; \Gamma~\vdash \kw{mx}\colcol\kw{T}}$


\end{document}
